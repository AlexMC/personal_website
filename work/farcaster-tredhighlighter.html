<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="#ffffff"/><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"/><meta name="theme-color" content="#ffffff"/><title>Alexandre Carvalho</title><meta name="description" content="Software Engineer &amp; Developer"/><link rel="icon" href="/favicon.ico"/><meta name="next-head-count" content="22"/><link rel="preload" href="/_next/static/css/fb7ffa4b1bade84d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/fb7ffa4b1bade84d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-64ad27b21261a9ce.js" defer=""></script><script src="/_next/static/chunks/main-03b4953d2715534d.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ddeb612f424df211.js" defer=""></script><script src="/_next/static/chunks/664-d254d21a6fe56bff.js" defer=""></script><script src="/_next/static/chunks/pages/work/%5Bslug%5D-f6bae875de04c1ec.js" defer=""></script><script src="/_next/static/II7u-8IrvL-bjtkXHsk4r/_buildManifest.js" defer=""></script><script src="/_next/static/II7u-8IrvL-bjtkXHsk4r/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen flex flex-col"><main class="flex-grow"><div class="min-h-screen bg-background text-primary"><header class="pt-16"><div class="max-w-3xl mx-auto px-4"><div class="flex flex-col space-y-4"><h1 class="text-4xl font-bold text-glow">ALEXANDRE CARVALHO</h1><h2 class="text-primary-light">CTPO | GEN AI | DECENTRALIZED LEDGER TECH</h2><nav class="flex space-x-8 text-primary-light"><a class="hover:text-primary transition-colors" href="/">HOME</a><a class="hover:text-primary transition-colors" href="/work">WORK</a><a class="hover:text-primary transition-colors" href="/blog">BLOG</a><a class="hover:text-primary transition-colors" href="/about">ABOUT</a></nav></div></div></header><main class="max-w-3xl mx-auto px-4 py-10"><article class="space-y-8"><header class="space-y-4"><a class="text-primary-light hover:text-primary transition-colors" href="/work">‚Üê BACK TO PROJECTS</a><h1 class="text-3xl font-bold text-glow">Trend Highlighter</h1><div class="flex items-center space-x-4"><div class="flex gap-2"><span class="text-xs px-2 py-1 bg-primary-dark text-primary border border-primary-medium">Python</span><span class="text-xs px-2 py-1 bg-primary-dark text-primary border border-primary-medium">TypeScript</span><span class="text-xs px-2 py-1 bg-primary-dark text-primary border border-primary-medium">Tailwind</span></div></div><img src="/images/trendhighlighter.png" alt="Trend Highlighter" class="w-full h-64 object-cover rounded-lg border border-primary-dark"/></header><div class="prose prose-invert prose-primary max-w-none"><h1>Building a Real-time Link Aggregator for Farcaster</h1>
<h2>1. Introduction</h2>
<p>The <a href="https://trendhighlighter.xyz">Farcaster Trend Highlighter</a> is a web application designed to surface the most relevant and trending content from the Farcaster social network. It addresses the challenge of information overload by aggregating and analyzing link-sharing patterns within user networks and custom groups.</p>
<p>Key challenges this project tackles:</p>
<ul>
<li>Real-time data collection and processing from the Farcaster network</li>
<li>Efficient storage and retrieval of social graph data</li>
<li>Intelligent content aggregation and trend detection</li>
<li>Scalable background processing for continuous updates</li>
</ul>
<h2>2. Architecture Overview</h2>
<p>The application is built on a modern stack designed for scalability and real-time processing. At its core, it utilizes FastAPI, PostgreSQL, and Redis for caching and real-time data processing. The system is containerized using Docker, which ensures consistent deployment across environments.</p>
<p>A key architectural decision was the implementation of Celery for background task processing, allowing us to handle time-consuming operations like data synchronization without impacting the user experience. This is complemented by Prometheus monitoring, giving us insights into system performance and helping identify bottlenecks.</p>
<h2>3. Core Technical Features</h2>
<h3>3.1 Efficient Data Collection</h3>
<p>We use the excelent Neynar API to fetch data from the Farcaster network. Our implementation uses Redis for efficient caching, ensuring data freshness and reducing API calls (and costs).:</p>
<div class="remark-highlight"><pre class="language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">FarcasterClient</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>api_key <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">"NEYNAR_API_KEY"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>base_url <span class="token operator">=</span> <span class="token string">"https://api.neynar.com/v2"</span>
        
        <span class="token comment"># Initialize Redis connection with TTL-based caching</span>
        redis_url <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">"REDIS_URL"</span><span class="token punctuation">,</span> <span class="token string">"redis://redis:6379/0"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>redis<span class="token punctuation">:</span> Redis <span class="token operator">=</span> redis<span class="token punctuation">.</span>from_url<span class="token punctuation">(</span>redis_url<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>cache_ttl <span class="token operator">=</span> <span class="token number">300</span>  <span class="token comment"># 5 minutes cache TTL</span>
        
        <span class="token comment"># Maintain a single aiohttp session for connection pooling</span>
        self<span class="token punctuation">.</span>session <span class="token operator">=</span> <span class="token boolean">None</span>
</code></pre></div>
<h3>3.2 Intelligent Content Processing</h3>
<p>One of the most interesting challenges was implementing intelligent URL extraction and processing. Our system can identify and categorize different types of content, from simple text links to embedded media. We developed an algorithm that not only extracts URLs but also analyzes their context and metadata.</p>
<p>The system handles various edge cases, such as duplicate URLs across different casts, embedded media content, and URL normalization. It also implements smart filtering to exclude image URLs and other media content that doesn't contribute to trend analysis.</p>
<h3>3.3 Real-time Updates</h3>
<p>The real-time update system utilizes a combination of background tasks and event-driven architecture. Celery workers continuously process user timelines, while the main application maintains real-time connections with clients through efficient database queries and caching strategies.</p>
<h3>3.4 Performance Optimizations</h3>
<p>Our performance optimization strategy focuses on three key areas: database query optimization, caching strategies, and efficient data structures. We use carefully crafted database indices, materialized views for complex aggregations, and a multi-level caching system that balances data freshness with response time.</p>
<h2>4. User Management and Authentication</h2>
<p>The authentication system integrates with Neynar's OAuth flow while maintaining its own user management system. This hybrid approach allows us to leverage Farcaster's authentication while maintaining control over user permissions and features. The system includes plan management, allowing for different levels of access and features based on user subscriptions.</p>
<h2>6. Deployment and Monitoring</h2>
<p>Our deployment strategy utilizes Docker Compose for orchestrating multiple services, including the main application, Celery workers, Redis, and PostgreSQL. The system includes comprehensive monitoring through Prometheus, with custom metrics for tracking API usage, cache hit rates, and background task performance.</p>
<h2>7. Advanced Features</h2>
<p>The application includes several advanced features, such as custom user lists for tracking specific groups of Farcaster users, trend analysis across different time windows, and intelligent content categorization. These features are implemented with scalability in mind, using efficient database queries and caching strategies.</p>
<h2>8. Technical Challenges and Solutions</h2>
<p>Throughout development, we encountered and solved several significant challenges:</p>
<ul>
<li>Implementing efficient rate limiting while maintaining data freshness</li>
<li>Designing a scalable database schema for social graph data</li>
<li>Building a reliable background processing system</li>
<li>Managing cache invalidation across multiple services</li>
</ul>
</div><div class="pt-8"><a href="https://trendhighlighter.xyz" target="_blank" rel="noopener noreferrer" class="text-primary hover:text-glow transition-colors">VIEW PROJECT ‚Üí</a></div></article></main><footer class="py-8 border-t border-primary-dark"><div class="max-w-3xl mx-auto px-4 text-center"><div class="flex justify-center space-x-8 mb-6"><a href="https://github.com/alexmc" target="_blank" rel="noopener noreferrer" class="text-primary-light hover:text-primary transition-colors">GITHUB</a><a href="https://twitter.com/alexmc" target="_blank" rel="noopener noreferrer" class="text-primary-light hover:text-primary transition-colors">TWITTER</a><a href="https://www.linkedin.com/in/alexandremcarvalho/" target="_blank" rel="noopener noreferrer" class="text-primary-light hover:text-primary transition-colors">LINKEDIN</a></div><p class="text-primary-light">¬© <!-- -->2025<!-- --> Alexandre Carvalho</p></div></footer></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"project":{"title":"Trend Highlighter","description":"(personal project) Surface the most relevant and trending content from the Farcaster social network.","technologies":["Python","TypeScript","Tailwind"],"link":"https://trendhighlighter.xyz","image":"/images/trendhighlighter.png","featured":true,"content":"\u003ch1\u003eBuilding a Real-time Link Aggregator for Farcaster\u003c/h1\u003e\n\u003ch2\u003e1. Introduction\u003c/h2\u003e\n\u003cp\u003eThe \u003ca href=\"https://trendhighlighter.xyz\"\u003eFarcaster Trend Highlighter\u003c/a\u003e is a web application designed to surface the most relevant and trending content from the Farcaster social network. It addresses the challenge of information overload by aggregating and analyzing link-sharing patterns within user networks and custom groups.\u003c/p\u003e\n\u003cp\u003eKey challenges this project tackles:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eReal-time data collection and processing from the Farcaster network\u003c/li\u003e\n\u003cli\u003eEfficient storage and retrieval of social graph data\u003c/li\u003e\n\u003cli\u003eIntelligent content aggregation and trend detection\u003c/li\u003e\n\u003cli\u003eScalable background processing for continuous updates\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e2. Architecture Overview\u003c/h2\u003e\n\u003cp\u003eThe application is built on a modern stack designed for scalability and real-time processing. At its core, it utilizes FastAPI, PostgreSQL, and Redis for caching and real-time data processing. The system is containerized using Docker, which ensures consistent deployment across environments.\u003c/p\u003e\n\u003cp\u003eA key architectural decision was the implementation of Celery for background task processing, allowing us to handle time-consuming operations like data synchronization without impacting the user experience. This is complemented by Prometheus monitoring, giving us insights into system performance and helping identify bottlenecks.\u003c/p\u003e\n\u003ch2\u003e3. Core Technical Features\u003c/h2\u003e\n\u003ch3\u003e3.1 Efficient Data Collection\u003c/h3\u003e\n\u003cp\u003eWe use the excelent Neynar API to fetch data from the Farcaster network. Our implementation uses Redis for efficient caching, ensuring data freshness and reducing API calls (and costs).:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eFarcasterClient\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eapi_key \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e os\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egetenv\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"NEYNAR_API_KEY\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ebase_url \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"https://api.neynar.com/v2\"\u003c/span\u003e\n        \n        \u003cspan class=\"token comment\"\u003e# Initialize Redis connection with TTL-based caching\u003c/span\u003e\n        redis_url \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e os\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egetenv\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"REDIS_URL\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"redis://redis:6379/0\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eredis\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e Redis \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e redis\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efrom_url\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eredis_url\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ecache_ttl \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e300\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 5 minutes cache TTL\u003c/span\u003e\n        \n        \u003cspan class=\"token comment\"\u003e# Maintain a single aiohttp session for connection pooling\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esession \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch3\u003e3.2 Intelligent Content Processing\u003c/h3\u003e\n\u003cp\u003eOne of the most interesting challenges was implementing intelligent URL extraction and processing. Our system can identify and categorize different types of content, from simple text links to embedded media. We developed an algorithm that not only extracts URLs but also analyzes their context and metadata.\u003c/p\u003e\n\u003cp\u003eThe system handles various edge cases, such as duplicate URLs across different casts, embedded media content, and URL normalization. It also implements smart filtering to exclude image URLs and other media content that doesn't contribute to trend analysis.\u003c/p\u003e\n\u003ch3\u003e3.3 Real-time Updates\u003c/h3\u003e\n\u003cp\u003eThe real-time update system utilizes a combination of background tasks and event-driven architecture. Celery workers continuously process user timelines, while the main application maintains real-time connections with clients through efficient database queries and caching strategies.\u003c/p\u003e\n\u003ch3\u003e3.4 Performance Optimizations\u003c/h3\u003e\n\u003cp\u003eOur performance optimization strategy focuses on three key areas: database query optimization, caching strategies, and efficient data structures. We use carefully crafted database indices, materialized views for complex aggregations, and a multi-level caching system that balances data freshness with response time.\u003c/p\u003e\n\u003ch2\u003e4. User Management and Authentication\u003c/h2\u003e\n\u003cp\u003eThe authentication system integrates with Neynar's OAuth flow while maintaining its own user management system. This hybrid approach allows us to leverage Farcaster's authentication while maintaining control over user permissions and features. The system includes plan management, allowing for different levels of access and features based on user subscriptions.\u003c/p\u003e\n\u003ch2\u003e6. Deployment and Monitoring\u003c/h2\u003e\n\u003cp\u003eOur deployment strategy utilizes Docker Compose for orchestrating multiple services, including the main application, Celery workers, Redis, and PostgreSQL. The system includes comprehensive monitoring through Prometheus, with custom metrics for tracking API usage, cache hit rates, and background task performance.\u003c/p\u003e\n\u003ch2\u003e7. Advanced Features\u003c/h2\u003e\n\u003cp\u003eThe application includes several advanced features, such as custom user lists for tracking specific groups of Farcaster users, trend analysis across different time windows, and intelligent content categorization. These features are implemented with scalability in mind, using efficient database queries and caching strategies.\u003c/p\u003e\n\u003ch2\u003e8. Technical Challenges and Solutions\u003c/h2\u003e\n\u003cp\u003eThroughout development, we encountered and solved several significant challenges:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eImplementing efficient rate limiting while maintaining data freshness\u003c/li\u003e\n\u003cli\u003eDesigning a scalable database schema for social graph data\u003c/li\u003e\n\u003cli\u003eBuilding a reliable background processing system\u003c/li\u003e\n\u003cli\u003eManaging cache invalidation across multiple services\u003c/li\u003e\n\u003c/ul\u003e\n"}},"__N_SSG":true},"page":"/work/[slug]","query":{"slug":"farcaster-tredhighlighter"},"buildId":"II7u-8IrvL-bjtkXHsk4r","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>